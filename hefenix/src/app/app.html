<main class="main">
  <section class="search-bar container">
    <input
      type="text"
      class="input"
      placeholder="Type repository to search..."
      [value]="searchQuery()"
      (input)="searchQuery.set($any($event.target).value)"
      (keyup.enter)="onSearch()"
      aria-label="Repository search"
    />

    <button class="btn btn-pill" type="button" (click)="onSearch()">Search</button>

    <!-- אם יש לכם ראוט: העדיפו routerLink -->
    <!-- <a class="link-pill ml-auto" routerLink="/bookmarks">View Bookmarks</a> -->
    <a class="link-pill ml-auto" href="" (click)="onViewBookmarks($event)">View Bookmarks</a>
  </section>

  <section class="results container">
    <p *ngIf="loading()" class="state state-loading">Searching…</p>
    <p *ngIf="error()" class="state state-error">{{ error() }}</p>

    <div *ngIf="results()?.items?.length" class="grid">
      <article *ngFor="let repo of results().items" class="card">
        <img
          class="avatar"
          [src]="repo.owner?.avatar_url"
          [alt]="repo.owner?.login"
          width="48" height="48"
          loading="lazy"
          decoding="async"
        />
        <div class="card-body">
          <h3 class="repo-name" title="{{ repo.full_name }}">{{ repo.name }}</h3>

          <div class="meta">
            <span class="owner" *ngIf="repo.owner?.login">@{{ repo.owner?.login }}</span>
            <span class="stars" *ngIf="repo.stargazers_count !== undefined">★ {{ repo.stargazers_count }}</span>
            <span class="lang" *ngIf="repo.language">{{ repo.language }}</span>

            <button
              type="button"
              class="btn btn-tag ml-auto"
              (click)="toggleBookmark(repo)"
              [attr.aria-pressed]="isBookmarked(repo.id)"
            >
              {{ isBookmarked(repo.id) ? 'Bookmarked' : 'Bookmark' }}
            </button>
          </div>
        </div>
      </article>
    </div>

    <p *ngIf="results() && !results()?.items?.length" class="state state-empty">
      No repositories found.
    </p>
  </section>
</main>

<router-outlet />

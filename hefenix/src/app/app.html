<main class="main">
  <div class="search-bar-container">
    <br><br><br>
    <input
      type="text"
      placeholder="Type repository to search..."
      [value]="searchQuery()"
      (input)="searchQuery.set($any($event.target).value)"
      (keyup.enter)="onSearch()"
      class="search-input"
    />
    <button class="pill" (click)="onSearch()">Search</button>
    <a href="" (click)="onViewBookmarks($event)" class="view-bookmarks">View Bookmarks</a>
  </div>

  <div class="results-container">
    <p *ngIf="loading()">Searchingâ€¦</p>
    <p *ngIf="error()" class="error-text">{{ error() }}</p>

    <div *ngIf="results()?.items?.length" class="repo-grid">
      <div *ngFor="let repo of results().items" class="repo-card">
        <img
          [src]="repo.owner?.avatar_url"
          [alt]="repo.owner?.login"
          width="48"
          height="48"
          class="repo-avatar"
        />
        <div class="repo-details">
          <div class="repo-name">{{ repo.name }}</div>
          <div class="repo-actions">
            <button type="button" (click)="toggleBookmark(repo)" class="bookmark-btn">
              {{ isBookmarked(repo.id) ? 'Bookmarked' : 'Bookmark' }}
            </button>
          </div>
        </div>
      </div>
    </div>

    <p *ngIf="results() && !results()?.items?.length" class="no-results">
      No repositories found.
    </p>
  </div>
</main>

<router-outlet />
